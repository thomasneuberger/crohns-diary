@page "/reports"
@using CrohnsDiary.App.Models

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <MudDateRangePicker PickerVariant="PickerVariant.Dialog" @bind-DateRange="Range"></MudDateRangePicker>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <MudChart ChartType="ChartType.Line" ChartSeries="Series" XAxisLabels="DayLabels" ChartOptions="Options" CanHideSeries Width="100%" Height="350px"></MudChart>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <MudDataGrid T="DailyReport" Items="dailyReports" Striped="true">
                <Columns>
                    <PropertyColumn Property="d => d.Day"></PropertyColumn>
                    <PropertyColumn Property="d => d.Count" Title="@Loc["Count"]"></PropertyColumn>
                    <PropertyColumn Property="d => d.AverageConsistency" Title="@Loc["AverageConsistency"]" Hidden="!_showConsistency"></PropertyColumn>
                    <PropertyColumn Property="d => d.AverageUrgency" Title="@Loc["AverageUrgency"]" Hidden="!_showUrgency"></PropertyColumn>
                    <PropertyColumn Property="d => d.AverageAir" Title="@Loc["AverageAir"]" Hidden="!_showAir"></PropertyColumn>
                </Columns>
            </MudDataGrid>
        </div>
    </div>
    
    <div class="row mt-5">
        <div class="col-12">
            <MudDivider />
            <h3 class="mt-3">@Loc["BloodPressureTitle"]</h3>
        </div>
    </div>
    @if (BloodPressureSeries.Count > 0)
    {
        <div class="row mt-3">
            <div class="col-12">
                <MudChart ChartType="ChartType.Line" ChartSeries="BloodPressureSeries" XAxisLabels="BloodPressureDayLabels" ChartOptions="BloodPressureOptions" CanHideSeries Width="100%" Height="350px"></MudChart>
            </div>
        </div>
    }
    else
    {
        <div class="row mt-3">
            <div class="col-12">
                <p>No blood pressure data available for the selected date range.</p>
            </div>
        </div>
    }
</div>